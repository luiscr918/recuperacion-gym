<app-navbar></app-navbar>

<div class="min-h-screen bg-black/90 p-6 mt-16">
    <div
        class="max-w-5xl mx-auto bg-gradient-to-br from-black via-gray-900 to-orange-900 rounded-2xl shadow-xl border-2 border-orange-500 p-8">
        <h2 class="text-3xl font-extrabold text-orange-500 mb-6 text-center">
                                    Panel de Administrador
                            </h2>
                    <div class="flex justify-end mb-4">
                        <button (click)="irARegistroCliente()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                            Registrar Cliente
                        </button>
        </div>

        <div *ngIf="clientes?.length; else sinClientes" class="overflow-x-auto">
            <table class="w-full text-left border-collapse border border-orange-500">
                <thead class="bg-orange-500 text-black">
                    <tr>
                        <th class="px-4 py-2">Nombre</th>
                        <th class="px-4 py-2">Email</th>
                        <th class="px-4 py-2">Fecha Registro</th>
                        <th class="px-4 py-2">Fin Suscripción</th>
                        <th class="px-4 py-2">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let c of clientes"
                        class="even:bg-gray-800 odd:bg-gray-900 hover:bg-gray-700 text-white">
                        <td class="px-4 py-2">{{ c.nombre }}</td>
                        <td class="px-4 py-2">{{ c.email }}</td>
                        <td class="px-4 py-2">{{ c.fechaRegistro | date:'mediumDate' }}</td>
                        <td class="px-4 py-2">{{ c.fechaFin | date:'mediumDate' }}</td>
                        <td class="px-4 py-2">
                            <button
                                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded mr-2"
                                (click)="editarCliente(c.id)">
                                Actualizar
                            </button>
                            <button
                                class="bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded"
                                (click)="eliminarCliente(c.id)">
                                Eliminar
                            </button>
                            <button>
                                
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <ng-template #sinClientes>
            <p class="text-orange-300 mt-4 text-center">No hay clientes registrados.</p>
        </ng-template>
    </div>
</div>

<app-footer></app-footer>
<div *ngIf="mostrarModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70">
    <div class="bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative">
        <button (click)="cerrarModal()" class="absolute top-2 right-2 text-black text-xl font-bold">&times;</button>
        <h2 class="text-2xl font-bold text-orange-500 mb-4 text-center">Actualizar Cliente</h2>
        <form (ngSubmit)="actualizarCliente()" class="space-y-4">
            <input type="text" name="nombre" placeholder="Nombre completo" [(ngModel)]="clienteEdit.nombre" required class="w-full p-2 rounded border border-orange-500 bg-white text-black focus:outline-none focus:ring-2 focus:ring-orange-500" />
            <input type="text" name="cedula" placeholder="Cédula" [(ngModel)]="clienteEdit.cedula" required class="w-full p-2 rounded border border-orange-500 bg-white text-black focus:outline-none focus:ring-2 focus:ring-orange-500" />
            <input type="email" name="email" placeholder="Email" [(ngModel)]="clienteEdit.email" required class="w-full p-2 rounded border border-orange-500 bg-white text-black focus:outline-none focus:ring-2 focus:ring-orange-500" />
            <input type="password" name="password" placeholder="Contraseña" [(ngModel)]="clienteEdit.password" required minlength="6" class="w-full p-2 rounded border border-orange-500 bg-white text-black focus:outline-none focus:ring-2 focus:ring-orange-500" />
            <input type="number" name="peso" placeholder="Peso (kg)" [(ngModel)]="clienteEdit.peso" required class="w-full p-2 rounded border border-orange-500 bg-white text-black focus:outline-none focus:ring-2 focus:ring-orange-500" />
            <input type="number" name="altura" placeholder="Altura (m)" [(ngModel)]="clienteEdit.altura" required step="0.01" class="w-full p-2 rounded border border-orange-500 bg-white text-black focus:outline-none focus:ring-2 focus:ring-orange-500" />
            <button type="submit" class="w-full bg-orange-500 text-black font-bold py-2 rounded hover:bg-orange-600 transition-colors">Actualizar</button>
            <p *ngIf="error" class="text-red-500 text-center">{{ error }}</p>
        </form>
    </div>
</div>
